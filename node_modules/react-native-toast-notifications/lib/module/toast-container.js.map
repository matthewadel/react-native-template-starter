{"version":3,"sources":["toast-container.tsx"],"names":["React","Component","StyleSheet","KeyboardAvoidingView","Platform","Dimensions","Toast","height","width","get","ToastContainer","constructor","props","message","toastOptions","id","Math","random","toString","onDestroy","onClose","setState","toasts","state","filter","t","requestAnimationFrame","open","onHide","hide","map","toast","some","renderBottomToasts","offset","offsetBottom","style","bottom","justifyContent","flexDirection","OS","undefined","styles","container","placement","renderTopToasts","offsetTop","top","renderCenterToasts","data","foundToast","length","render","swipeEnabled","create","flex","position","maxWidth","zIndex","elevation","alignSelf","overflow","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  ViewStyle,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  Dimensions,\r\n} from \"react-native\";\r\nimport Toast, { ToastOptions, ToastProps } from \"./toast\";\r\n\r\nconst { height, width } = Dimensions.get(\"window\");\r\n\r\nexport interface Props extends ToastOptions {\r\n  renderToast?(toast: ToastProps): JSX.Element;\r\n  renderType?: { [type: string]: (toast: ToastProps) => JSX.Element };\r\n  offset?: number;\r\n  offsetTop?: number;\r\n  offsetBottom?: number;\r\n  swipeEnabled?: boolean;\r\n}\r\n\r\ninterface State {\r\n  toasts: Array<ToastProps>;\r\n}\r\n\r\nclass ToastContainer extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      toasts: [],\r\n    };\r\n  }\r\n\r\n  static defaultProps: Props = {\r\n    placement: \"bottom\",\r\n    offset: 10,\r\n    swipeEnabled: true,\r\n  };\r\n\r\n  /**\r\n   * Shows a new toast. Returns id\r\n   */\r\n  show = (message: string | JSX.Element, toastOptions?: ToastOptions) => {\r\n    let id = toastOptions?.id || Math.random().toString();\r\n    const onDestroy = () => {\r\n      toastOptions?.onClose && toastOptions?.onClose();\r\n      this.setState({ toasts: this.state.toasts.filter((t) => t.id !== id) });\r\n    };\r\n\r\n    requestAnimationFrame(() => {\r\n      this.setState({\r\n        toasts: [\r\n          {\r\n            id,\r\n            onDestroy,\r\n            message,\r\n            open: true,\r\n            onHide: () => this.hide(id),\r\n            ...this.props,\r\n            ...toastOptions,\r\n          },\r\n          ...this.state.toasts.filter((t) => t.open),\r\n        ],\r\n      });\r\n    });\r\n\r\n    return id;\r\n  };\r\n\r\n  /**\r\n   * Updates a toast, To use this create you must pass an id to show method first, then pass it here to update the toast.\r\n   */\r\n  update = (\r\n    id: string,\r\n    message: string | JSX.Element,\r\n    toastOptions?: ToastOptions\r\n  ) => {\r\n    this.setState({\r\n      toasts: this.state.toasts.map((toast) =>\r\n        toast.id === id ? { ...toast, message, ...toastOptions } : toast\r\n      ),\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Removes a toast from stack\r\n   */\r\n  hide = (id: string) => {\r\n    this.setState({\r\n      toasts: this.state.toasts.map((t) =>\r\n        t.id === id ? { ...t, open: false } : t\r\n      ),\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Removes all toasts in stack\r\n   */\r\n  hideAll = () => {\r\n    this.setState({\r\n      toasts: this.state.toasts.map((t) => ({ ...t, open: false })),\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Check if a toast is currently open\r\n   */\r\n  isOpen = (id: string) => {\r\n    return this.state.toasts.some((t) => t.id === id && t.open);\r\n  }\r\n\r\n  renderBottomToasts() {\r\n    const { toasts } = this.state;\r\n    let { offset, offsetBottom } = this.props;\r\n    let style: ViewStyle = {\r\n      bottom: offsetBottom || offset,\r\n      width: width,\r\n      justifyContent: \"flex-end\",\r\n      flexDirection: \"column\",\r\n    };\r\n    return (\r\n      <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"position\" : undefined}\r\n        style={[styles.container, style]}\r\n        pointerEvents=\"box-none\"\r\n      >\r\n        {toasts\r\n          .filter((t) => !t.placement || t.placement === \"bottom\")\r\n          .map((toast) => (\r\n            <Toast key={toast.id} {...toast} />\r\n          ))}\r\n      </KeyboardAvoidingView>\r\n    );\r\n  }\r\n\r\n  renderTopToasts() {\r\n    const { toasts } = this.state;\r\n    let { offset, offsetTop } = this.props;\r\n    let style: ViewStyle = {\r\n      top: offsetTop || offset,\r\n      width: width,\r\n      justifyContent: \"flex-start\",\r\n      flexDirection: \"column-reverse\",\r\n    };\r\n    return (\r\n      <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"position\" : undefined}\r\n        style={[styles.container, style]}\r\n        pointerEvents=\"box-none\"\r\n      >\r\n        {toasts\r\n          .filter((t) => t.placement === \"top\")\r\n          .map((toast) => (\r\n            <Toast key={toast.id} {...toast} />\r\n          ))}\r\n      </KeyboardAvoidingView>\r\n    );\r\n  }\r\n\r\n  renderCenterToasts() {\r\n    const { toasts } = this.state;\r\n    let { offset, offsetTop } = this.props;\r\n    let style: ViewStyle = {\r\n      top: offsetTop || offset,\r\n      height: height,\r\n      width: width,\r\n      justifyContent: \"center\",\r\n      flexDirection: \"column-reverse\",\r\n    };\r\n\r\n    const data = toasts.filter((t) => t.placement === \"center\");\r\n    const foundToast = data.length > 0;\r\n\r\n    if (!foundToast) return null;\r\n\r\n    return (\r\n      <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"position\" : undefined}\r\n        style={[styles.container, style]}\r\n        pointerEvents=\"box-none\"\r\n      >\r\n        {toasts\r\n          .filter((t) => t.placement === \"center\")\r\n          .map((toast) => (\r\n            <Toast key={toast.id} {...toast} />\r\n          ))}\r\n      </KeyboardAvoidingView>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.renderTopToasts()}\r\n        {this.renderBottomToasts()}\r\n        {this.renderCenterToasts()}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 0,\r\n    position: \"absolute\",\r\n    maxWidth: \"100%\",\r\n    zIndex: 999999,\r\n    elevation: 999999,\r\n    alignSelf: 'center',\r\n    ...(Platform.OS === \"web\" ? { overflow: \"hidden\" } : null),\r\n  },\r\n  message: {\r\n    color: \"#333\",\r\n  },\r\n});\r\n\r\nexport default ToastContainer;\r\n"]}